(function(){function a(t,a,i,n){var r=t.find(".modal-body .nav-tabs>li");t.find(".modal-footer").removeClass("hidden");if(n==null)n=[0];r.on("click",function(){var a=r.index(this),i=false;for(var e=0;e<n.length;e++){if(a==n[e]){i=true;break}}if(i){t.find(".modal-footer").removeClass("hidden")}else{t.find(".modal-footer:not(.hidden)").addClass("hidden")}});t.find("table[data-page-size]").each(function(){l($(this),a,i)})}function l(t,n,r){if(!t||t.length<1)return;var f=t.data(),i=null;if(r){if(f.ajaxList&&f.ajaxList in r)r[f.ajaxList](t);if("switchPage"in r)i=r["switchPage"];if("pageData"in r)f=typeof r["pageData"]=="function"?r["pageData"](t):r["pageData"]}App.withPagination(f,null);t.after(f.pagination);if(!i){i=function(a){var i={ajaxList:f.ajaxList,page:a};i=$.extend(i,n||{});var e=typeof f["pageUrl"]!="undefined"?f["pageUrl"]:window.location.href;$.get(e,i,function(a){var i=t.parent();i.html(a);l(i.children("table[data-page-size]"),n,r)},"html")}}var a=t.next("ul.pagination");a.find("li > a[page]").on("click",function(){if($(this).closest("li.disabled").length>0)return;i($(this).attr("page"))});a.on("refresh",function(){var a=1;if($(this).data("page")){a=$(this).data("page");$(this).data("page",false)}else{a=$(this).find("li.active > a[page]").data("page")||1}i(a)})}function i(l,o,d,a,s,c){var i=l.data("form-data"),e=o.find("form");e[0].reset();var h=o.find(".langset").length>0,g="";if(h){var t=o.find(".langset > .nav-tabs > li:first");if(!t.hasClass("active")){t.children("a").trigger("click")}g=t.children("a").data("lang")}if(i){for(var n in i){var r=i[n],f=e.find('[name="'+n+'"]:first');if(f.length<1)continue;var p=f.attr("type");switch(f[0].tagName.toLowerCase()){case"input":if(p==="checkbox"||p==="radio"){e.find('[name="'+n+'"][value="'+r+'"]').prop("checked",true)}else{f.val(r)}break;default:f.val(r);break}}}if(a)a(l,o,i,h,g);var u=o.find(".modal-footer .btn-primary");u.off("click").on("click",function(){var a=o.find("form"),e={};a.find("input,select,textarea").each(function(){var a=$(this).attr("name"),i="";switch(this.tagName.toLowerCase()){case"input":if(this.type==="checkbox"||this.type==="radio"){if(!this.checked)return}else if(this.type==="button"){return}i=$(this).val();break;default:i=$(this).val();break}if(a)e[a]=i});var t={data:e,multilingual:h};if(h){if(!c)c="Language";if(!d){var n=c+"["+g+"]";a.find('[name^="'+n+'"]').each(function(){var a=$(this).attr("name"),i=a.replace(n+"[","").replace("]","");t[i]=e[a]})}else{for(var i=0;i<d.length;i++){var r=d[i];t[r]=e[c+"["+g+"]["+r+"]"]}}t.langDefault=g}else{if(!d){for(var f in e){t[f]=e[f]}}else{for(var i=0;i<d.length;i++){var r=d[i];t[r]=e[r]}}}if(s)s(l,o,t)})}App.initModalBody=a;App.initModalBodyPagination=l;App.initModalForm=i})();