(function(t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else if(typeof exports==="object"){module.exports=t}else{t(jQuery)}})(function(v){function h(o,l,s,c,f,u,p){if(!f)f=BACKEND_URL+"/tool/area/index";v.get(typeof f==="function"?f():f,{pid:l},function(t){if(t.Code!=1){return App.message({text:t.Info,type:"error"})}if(!t.Data||t.Data.listData.length<1){while(v(o).next("select").length>0)v(o).next("select").remove();if(l!=""&&l!="0")v(o).remove();else v(o).html('<option value=""> - '+(App.i18n.PLEASE_SELECT?App.i18n.PLEASE_SELECT:"请选择")+" - </option>");return}v(o).show(a);var e=v(o).data("exclude");var a='<option value=""> - '+(App.i18n.PLEASE_SELECT?App.i18n.PLEASE_SELECT:"请选择")+" - </option>";for(var n=0;n<t.Data.listData.length;n++){var i=t.Data.listData[n];var r="";if(s==i[u])r+=" selected";if(e==i[u])r+=" disabled";a+='<option value="'+i[u]+'"'+r+">"+i.name+"</option>"}v(o).html(a);p&&p(l,t);d(o,c,f,u,p).trigger("change")},"json")}function d(c,f,u,p,d){if(v(c).data("bindEvent")){return v(c)}v(c).data("bindEvent",true);return v(c).on("change",function(){var t=v(this).val();var e=v(this).attr("name");var a=v(this).attr("class");var n=Number(v(this).attr("pos")||0);var i=v(this).data("target");var r=v(this).data("exclude");if(t==""||t=="0"){if(n==0&&i)v(i).val(t);while(v(c).next("select").length>0)v(c).next("select").remove();return}if(i)v(i).val(t);var o=n+1;if(v(this).next("select").length<1){var l=' pos="'+o+'"';if(e)l+=' name="'+e+'"';if(a)l+=' class="'+a+'"';if(i)l+=' data-target="'+i+'"';if(r)l+=' data-exclude="'+r+'"';v(this).after("<select"+l+' style="display:none"></select>')}var s="";if(v.isArray(f)&&f.length>o)s=f[o];h(v(this).next("select")[0],t,s,f,u,p,d)})}function t(c,t,e,a,n){if(t==null){t=v(c).data("selected")||[];if(t&&!v.isArray(t))t=String(t).split(",")}if(!e)e=v(c).data("url");if(!a)a=v(c).data("idKey")||"id";var i=t&&t.length>0?t[0]:"";var r=v(c).data("country");var o=v(c).data("country-url");if(r||o){if(!o)o=typeof e=="function"?e():e;v.get(o,{country:true,id:i},function(t){if(t.Code!=1){return App.message({text:t.Info,type:"error"})}if(!t.Data||t.Data.listData.length<1){return}var e='<option value=""> - '+(App.i18n.PLEASE_SELECT?App.i18n.PLEASE_SELECT:"请选择")+" - </option>";var a=t.Data.countryAbbr||"";for(var n=0;n<t.Data.listData.length;n++){var i=t.Data.listData[n];var r="";if(a==i.abbr)r+=" selected";e+='<option value="'+i.abbr+'"'+r+">"+i.name+"</option>"}var o=v(c).prev("span.select-country-wrap");if(o.length<1){var l=v('<span class="select-country-wrap"><select id="select-country">'+e+"</select></span>");v(c).before(l);var s=l.children("select");s.attr("class",v(c).attr("class"));s.on("change",function(){v(c).trigger("reload")}).trigger("change")}},"json");var l=typeof e=="function"?e():e;var s=l.indexOf("?")>0?"&":"?";e=function(){return l+s+"countryAbbr="+(v("#select-country").val()||"")}}h(c,0,i,t,e,a,n);v(c).on("reload",function(){h(c,0,i,t,e,a,n)})}window.CascadeSelect={init:t};v.fn.cascadeSelect=function(){v(this).each(function(){t(this)})};return window.CascadeSelect});