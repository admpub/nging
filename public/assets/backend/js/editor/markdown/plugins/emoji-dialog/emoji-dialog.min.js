(function(){var a=function(S){var C=jQuery;var M="emoji-dialog";var E=0;var q=[];var _=[];var O={"zh-cn":{toolbar:{emoji:"Emoji 表情"},dialog:{emoji:{title:"Emoji 表情"}}},"zh-tw":{toolbar:{emoji:"Emoji 表情"},dialog:{emoji:{title:"Emoji 表情"}}},en:{toolbar:{emoji:"Emoji"},dialog:{emoji:{title:"Emoji"}}}};S.fn.emojiDialog=function(){var e=this;var i=this.cm;var a=e.settings;if(!a.emoji){alert("settings.emoji == false");return}var t=a.pluginPath+M+"/";var o=this.editor;var l=i.getCursor();var n=i.getSelection();var v=this.classPrefix;C.extend(true,this.lang,O[this.lang.name]);this.setToolbar();var r=this.lang;var s=v+M,d;var c=r.dialog.emoji;var f=['<div class="'+v+'emoji-dialog-box" style="width:760px;height:334px;margin-bottom:8px;overflow:hidden">','<div class="'+v+'tab"></div>',"</div>"].join("\n");i.focus();if(o.find("."+s).length>0){d=o.find("."+s);_=[];d.find("a").removeClass("selected");this.dialogShowMask(d);this.dialogLockScreen();d.show()}else{d=this.createDialog({name:s,title:c.title,width:800,height:475,mask:a.dialogShowMask,drag:a.dialogDraggable,content:f,lockScreen:a.dialogLockScreen,maskStyle:{opacity:a.dialogMaskOpacity,backgroundColor:a.dialogMaskBgColor},buttons:{enter:[r.buttons.enter,function(){i.replaceSelection(_.join(" "));this.hide().lockScreen(false).hideMask();return false}],cancel:[r.buttons.cancel,function(){this.hide().lockScreen(false).hideMask();return false}]}})}var h=["Github emoji","Font awesome"];var m=d.find("."+v+"tab");if(m.html()===""){var g='<ul class="'+v+'tab-head">';for(var u=0;u<h.length;u++){var j=u===0?' class="active"':"";g+="<li"+j+'><a href="javascript:;">'+h[u]+"</a></li>"}g+="</ul>";m.append(g);var p='<div class="'+v+'tab-container">';for(var b=0;b<h.length;b++){var k=b===0?"":"display:none;";p+='<div class="'+v+'tab-box" style="height:300px;overflow:hidden;overflow-y:auto;'+k+'"></div>'}p+="</div>";m.append(p)}var w=m.find("."+v+"tab-box");var y=["github-emoji","font-awesome"];var x=function(){var e=y[E];var i=q[e];var a=w.eq(E);if(a.html()!==""){return}var t=function(e,i){var a=20;var t=Math.ceil(e.length/a);var o='<div class="'+v+'grid-table">';for(var l=0;l<t;l++){var n='<div class="'+v+'grid-table-row">';for(var r=0;r<a;r++){var s=C.trim(e[l*a+r]);if(typeof s!=="undefined"&&s!==""){var d="",c="";if(i==="github-emoji"){var f=s==="+1"?"plus1":s;f=f==="black_large_square"?"black_square":f;f=f==="moon"?"waxing_gibbous_moon":f;f=S.emoji.path+f+S.emoji.ext;d='<img src="'+f+'" width="24" class="emoji" title="&#58;'+s+'&#58;" alt="&#58;'+s+'&#58;" />';n+='<a href="javascript:;" value=":'+s+':" title=":'+s+':" class="'+v+'emoji-btn">'+d+"</a>"}else if(i==="font-awesome"){c='<i class="fa fa-'+s+' fa-emoji" title="'+s+'"></i>';n+='<a href="javascript:;" value=":fa-'+s+':" title=":fa-'+s+':" class="'+v+'emoji-btn">'+c+"</a>"}}else{n+='<a href="javascript:;" value=""></a>'}}n+="</div>";o+=n}o+="</div>";return o};if(E===0){for(var o=0,l=i.length;o<l;o++){var n=o===0?' style="margin: 0 0 10px;"':' style="margin: 10px 0;"';a.append("<h4"+n+">"+i[o].category+"</h4>");a.append(t(i[o].list,e))}}else{a.append(t(i,e))}a.find("."+v+"emoji-btn").bind(S.mouseOrTouch("click","touchend"),function(){C(this).toggleClass("selected");if(C(this).hasClass("selected")){_.push(C(this).attr("value"))}})};if(q.length<1){if(typeof d.loading==="function"){d.loading(true)}C.getJSON(t+"emoji.json?temp="+Math.random(),function(e){if(typeof d.loading==="function"){d.loading(false)}q=e;x()})}else{x()}m.find("li").bind(S.mouseOrTouch("click","touchend"),function(){var e=C(this);E=e.index();e.addClass("active").siblings().removeClass("active");w.eq(E).show().siblings().hide();x()})}};if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=a}else if(typeof define==="function"){if(define.amd){define(["editormd"],function(e){a(e)})}else{define(function(e){var i=e("./../../editormd");a(i)})}}else{a(window.editormd)}})();